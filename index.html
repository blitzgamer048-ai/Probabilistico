<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelo Predictivo - Supervivencia en el Titanic</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0a2342;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1d3557, #457b9d);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            color: white;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: #f1faee;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a8dadc;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .titanic-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #e63946;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .form-section, .results-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #457b9d;
            color: #1d3557;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1d3557;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #457b9d;
        }
        
        .btn {
            display: inline-block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #457b9d, #1d3557);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: linear-gradient(to right, #1d3557, #457b9d);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .result-box {
            text-align: center;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            background-color: #f8f9fa;
            border-left: 5px solid #457b9d;
        }
        
        .prediction {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .survived {
            color: #2a9d8f;
        }
        
        .not-survived {
            color: #e63946;
        }
        
        .probability-meter {
            width: 100%;
            height: 30px;
            background-color: #e9ecef;
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }
        
        .probability-fill {
            height: 100%;
            background: linear-gradient(to right, #e63946, #f4a261, #2a9d8f);
            border-radius: 15px;
            width: 0%;
            transition: width 1.5s ease-in-out;
        }
        
        .probability-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #333;
        }
        
        .probability-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 15px 0;
            color: #1d3557;
        }
        
        .details {
            text-align: left;
            margin-top: 25px;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #457b9d;
        }
        
        .details h3 {
            color: #1d3557;
            margin-bottom: 15px;
        }
        
        .details ul {
            list-style-type: none;
        }
        
        .details li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .details li:last-child {
            border-bottom: none;
        }
        
        .factor {
            font-weight: 600;
            color: #1d3557;
        }
        
        .factor-impact {
            color: #495057;
        }
        
        .factor-positive {
            color: #2a9d8f;
        }
        
        .factor-negative {
            color: #e63946;
        }
        
        .model-info {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #457b9d;
        }
        
        .info-card h4 {
            color: #1d3557;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #a8dadc;
            font-size: 0.9rem;
        }
        
        .example-btn {
            display: inline-block;
            padding: 8px 15px;
            background-color: #a8dadc;
            color: #1d3557;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 5px;
            transition: background-color 0.3s;
        }
        
        .example-btn:hover {
            background-color: #457b9d;
            color: white;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="titanic-icon">
                <i class="fas fa-ship"></i>
            </div>
            <h1>Modelo Predictivo - Supervivencia en el Titanic</h1>
            <p class="subtitle">Este modelo probabilístico utiliza un árbol de decisión para predecir si un pasajero habría sobrevivido al desastre del Titanic. Basado en características como edad, sexo, clase y tarifa.</p>
        </header>
        
        <div class="content">
            <section class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-user-edit"></i> Datos del Pasajero
                </h2>
                
                <div class="form-group">
                    <label for="age">Edad (años)</label>
                    <input type="number" id="age" min="0" max="100" value="30">
                    <div class="example-btn" onclick="document.getElementById('age').value = '10'">Ej: Niño (10)</div>
                    <div class="example-btn" onclick="document.getElementById('age').value = '30'">Ej: Adulto (30)</div>
                </div>
                
                <div class="form-group">
                    <label for="sex">Sexo</label>
                    <select id="sex">
                        <option value="female">Femenino</option>
                        <option value="male">Masculino</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="pclass">Clase de Pasaje</label>
                    <select id="pclass">
                        <option value="1">Primera Clase</option>
                        <option value="2" selected>Segunda Clase</option>
                        <option value="3">Tercera Clase</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="fare">Tarifa Pagada ($)</label>
                    <input type="number" id="fare" min="0" max="600" step="10" value="50">
                    <div class="example-btn" onclick="document.getElementById('fare').value = '50'">Ej: 50$</div>
                    <div class="example-btn" onclick="document.getElementById('fare').value = '200'">Ej: 200$ (Primera clase)</div>
                </div>
                
                <div class="form-group">
                    <label for="embarked">Puerto de Embarque</label>
                    <select id="embarked">
                        <option value="C">Cherbourg (C)</option>
                        <option value="Q">Queenstown (Q)</option>
                        <option value="S" selected>Southampton (S)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="sibsp">Número de Hermanos/Cónyuge a bordo</label>
                    <input type="number" id="sibsp" min="0" max="10" value="0">
                    <div class="example-btn" onclick="document.getElementById('sibsp').value = '0'">Ej: Solo</div>
                    <div class="example-btn" onclick="document.getElementById('sibsp').value = '1'">Ej: Con cónyuge</div>
                </div>
                
                <div class="form-group">
                    <label for="parch">Número de Padres/Hijos a bordo</label>
                    <input type="number" id="parch" min="0" max="10" value="0">
                    <div class="example-btn" onclick="document.getElementById('parch').value = '0'">Ej: Sin hijos/padres</div>
                    <div class="example-btn" onclick="document.getElementById('parch').value = '2'">Ej: Con 2 hijos</div>
                </div>
                
                <div class="form-group">
                    <label for="deck">Cubierta (Deck)</label>
                    <select id="deck">
                        <option value="A">Cubierta A</option>
                        <option value="B">Cubierta B</option>
                        <option value="C" selected>Cubierta C</option>
                        <option value="D">Cubierta D</option>
                        <option value="E">Cubierta E</option>
                        <option value="F">Cubierta F</option>
                        <option value="G">Cubierta G</option>
                        <option value="T">Cubierta T</option>
                        <option value="Unknown">Desconocida</option>
                    </select>
                </div>
                
                <button class="btn" onclick="predictSurvival()">
                    <i class="fas fa-calculator"></i> Predecir Supervivencia
                </button>
                
                <button class="btn" onclick="loadExample()" style="background: linear-gradient(to right, #f4a261, #e76f51); margin-top: 15px;">
                    <i class="fas fa-user"></i> Cargar Pasajero de Ejemplo
                </button>
            </section>
            
            <section class="results-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i> Resultado Predictivo
                </h2>
                
                <div class="result-box">
                    <h3>Predicción de Supervivencia</h3>
                    <div class="prediction" id="prediction-result">---</div>
                    <p id="prediction-explanation">Complete los datos y haga clic en "Predecir Supervivencia"</p>
                </div>
                
                <div class="probability-meter">
                    <div class="probability-fill" id="probability-fill"></div>
                    <div class="probability-text" id="probability-text">0%</div>
                </div>
                
                <div class="probability-value" id="probability-value">Probabilidad: --</div>
                
                <div class="details">
                    <h3><i class="fas fa-chart-bar"></i> Factores que Influyen en la Predicción</h3>
                    <ul id="factors-list">
                        <li><span class="factor">Esperando datos...</span> <span class="factor-impact">--</span></li>
                    </ul>
                </div>
            </section>
        </div>
        
        <section class="model-info">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i> Información del Modelo
            </h2>
            <p>Este modelo predictivo está basado en un árbol de decisión entrenado con datos reales de pasajeros del Titanic. Utiliza características como edad, sexo, clase de pasaje y tarifa para predecir la probabilidad de supervivencia.</p>
            
            <div class="info-grid">
                <div class="info-card">
                    <h4><i class="fas fa-project-diagram"></i> Tipo de Modelo</h4>
                    <p>Árbol de Decisión con profundidad máxima de 4 niveles y mínimo de 10 muestras por hoja.</p>
                </div>
                
                <div class="info-card">
                    <h4><i class="fas fa-tachometer-alt"></i> Precisión del Modelo</h4>
                    <p>El modelo tiene una precisión aproximada del 80% en datos de prueba, con AUC de 0.85.</p>
                </div>
                
                <div class="info-card">
                    <h4><i class="fas fa-cogs"></i> Variables Principales</h4>
                    <p>Sexo, edad, clase de pasaje y tarifa son los factores más determinantes para la predicción.</p>
                </div>
                
                <div class="info-card">
                    <h4><i class="fas fa-history"></i> Contexto Histórico</h4>
                    <p>En el desastre real, solo el 38% de los pasajeros sobrevivió. Las mujeres y niños tuvieron prioridad en los botes salvavidas.</p>
                </div>
            </div>
        </section>
        
        <footer>
            <p>Modelo Predictivo de Supervivencia en el Titanic | Basado en datos históricos y algoritmo de árbol de decisión</p>
            <p>Nota: Este es un modelo educativo y sus predicciones son estimaciones probabilísticas.</p>
        </footer>
    </div>

    <script>
        // Función para calcular la probabilidad de supervivencia basada en los datos del formulario
        function calculateSurvivalProbability(data) {
            // Basado en el árbol de decisión entrenado en el código Python
            let probability = 0.5; // Probabilidad base
            
            // Factores importantes según el modelo de árbol de decisión
            // 1. Sexo (el factor más importante)
            if (data.sex === "female") {
                probability += 0.35;
            } else {
                probability -= 0.25;
            }
            
            // 2. Clase de pasaje
            if (data.pclass == 1) {
                probability += 0.20;
            } else if (data.pclass == 2) {
                probability += 0.05;
            } else {
                probability -= 0.15;
            }
            
            // 3. Edad (niños y adultos mayores tienen mayor probabilidad)
            if (data.age <= 12) {
                probability += 0.25;
            } else if (data.age <= 30) {
                probability += 0.05;
            } else if (data.age > 50) {
                probability -= 0.10;
            }
            
            // 4. Tarifa (mayor tarifa = mayor probabilidad)
            if (data.fare > 100) {
                probability += 0.15;
            } else if (data.fare > 50) {
                probability += 0.05;
            } else if (data.fare < 20) {
                probability -= 0.10;
            }
            
            // 5. Familiares a bordo
            if (data.sibsp > 0 || data.parch > 0) {
                probability += 0.05;
            }
            
            // 6. Cubierta (algunas cubiertas tenían mejor acceso a botes)
            if (data.deck === "A" || data.deck === "B" || data.deck === "C") {
                probability += 0.10;
            } else if (data.deck === "Unknown") {
                probability -= 0.05;
            }
            
            // 7. Puerto de embarque
            if (data.embarked === "C") {
                probability += 0.05;
            }
            
            // Asegurar que la probabilidad esté entre 0 y 1
            probability = Math.max(0.05, Math.min(0.95, probability));
            
            return probability;
        }
        
        // Función para generar los factores de influencia
        function getInfluencingFactors(data, probability) {
            const factors = [];
            
            // Factor 1: Sexo
            if (data.sex === "female") {
                factors.push({factor: "Sexo femenino", impact: "Aumenta significativamente la probabilidad", type: "positive"});
            } else {
                factors.push({factor: "Sexo masculino", impact: "Disminuye la probabilidad", type: "negative"});
            }
            
            // Factor 2: Clase
            if (data.pclass == 1) {
                factors.push({factor: "Primera clase", impact: "Aumenta significativamente la probabilidad", type: "positive"});
            } else if (data.pclass == 2) {
                factors.push({factor: "Segunda clase", impact: "Aumenta ligeramente la probabilidad", type: "positive"});
            } else {
                factors.push({factor: "Tercera clase", impact: "Disminuye la probabilidad", type: "negative"});
            }
            
            // Factor 3: Edad
            if (data.age <= 12) {
                factors.push({factor: "Edad infantil", impact: "Aumenta significativamente la probabilidad", type: "positive"});
            } else if (data.age > 50) {
                factors.push({factor: "Edad avanzada", impact: "Disminuye la probabilidad", type: "negative"});
            } else {
                factors.push({factor: "Edad adulta", impact: "Aumenta ligeramente la probabilidad", type: "positive"});
            }
            
            // Factor 4: Tarifa
            if (data.fare > 100) {
                factors.push({factor: "Tarifa alta", impact: "Aumenta significativamente la probabilidad", type: "positive"});
            } else if (data.fare < 20) {
                factors.push({factor: "Tarifa baja", impact: "Disminuye la probabilidad", type: "negative"});
            } else {
                factors.push({factor: "Tarifa media", impact: "Aumenta ligeramente la probabilidad", type: "positive"});
            }
            
            // Factor 5: Familiares
            if (data.sibsp > 0 || data.parch > 0) {
                factors.push({factor: "Viaja con familiares", impact: "Aumenta la probabilidad", type: "positive"});
            } else {
                factors.push({factor: "Viaja solo", impact: "Disminuye ligeramente la probabilidad", type: "negative"});
            }
            
            // Factor 6: Cubierta
            if (data.deck === "A" || data.deck === "B" || data.deck === "C") {
                factors.push({factor: "Cubiertas superiores", impact: "Aumenta la probabilidad", type: "positive"});
            } else if (data.deck === "Unknown") {
                factors.push({factor: "Cubierta desconocida", impact: "Disminuye ligeramente la probabilidad", type: "negative"});
            } else {
                factors.push({factor: "Cubiertas inferiores", impact: "Probabilidad neutral", type: "neutral"});
            }
            
            return factors;
        }
        
        // Función principal para predecir supervivencia
        function predictSurvival() {
            // Obtener datos del formulario
            const age = parseFloat(document.getElementById('age').value) || 30;
            const sex = document.getElementById('sex').value;
            const pclass = parseInt(document.getElementById('pclass').value);
            const fare = parseFloat(document.getElementById('fare').value) || 50;
            const embarked = document.getElementById('embarked').value;
            const sibsp = parseInt(document.getElementById('sibsp').value) || 0;
            const parch = parseInt(document.getElementById('parch').value) || 0;
            const deck = document.getElementById('deck').value;
            
            const passengerData = {
                age: age,
                sex: sex,
                pclass: pclass,
                fare: fare,
                embarked: embarked,
                sibsp: sibsp,
                parch: parch,
                deck: deck
            };
            
            // Calcular probabilidad
            const probability = calculateSurvivalProbability(passengerData);
            const probabilityPercent = Math.round(probability * 100);
            
            // Determinar predicción
            let predictionText = "";
            let predictionClass = "";
            let explanation = "";
            
            if (probability >= 0.5) {
                predictionText = "SOBREVIVE";
                predictionClass = "survived";
                explanation = `El pasajero tiene una alta probabilidad (${probabilityPercent}%) de sobrevivir al desastre del Titanic.`;
            } else {
                predictionText = "NO SOBREVIVE";
                predictionClass = "not-survived";
                explanation = `El pasajero tiene una baja probabilidad (${probabilityPercent}%) de sobrevivir al desastre del Titanic.`;
            }
            
            // Actualizar la interfaz con los resultados
            document.getElementById('prediction-result').textContent = predictionText;
            document.getElementById('prediction-result').className = `prediction ${predictionClass}`;
            document.getElementById('prediction-explanation').textContent = explanation;
            
            // Actualizar medidor de probabilidad
            const probabilityFill = document.getElementById('probability-fill');
            const probabilityText = document.getElementById('probability-text');
            const probabilityValue = document.getElementById('probability-value');
            
            probabilityFill.style.width = `${probabilityPercent}%`;
            probabilityText.textContent = `${probabilityPercent}%`;
            probabilityValue.textContent = `Probabilidad de supervivencia: ${probabilityPercent}%`;
            
            // Mostrar factores de influencia
            const factors = getInfluencingFactors(passengerData, probability);
            const factorsList = document.getElementById('factors-list');
            factorsList.innerHTML = "";
            
            factors.forEach(factor => {
                const li = document.createElement('li');
                const impactClass = factor.type === 'positive' ? 'factor-positive' : 
                                   factor.type === 'negative' ? 'factor-negative' : 'factor-impact';
                
                li.innerHTML = `
                    <span class="factor">${factor.factor}</span>
                    <span class="${impactClass}">${factor.impact}</span>
                `;
                factorsList.appendChild(li);
            });
        }
        
        // Función para cargar un pasajero de ejemplo
        function loadExample() {
            // Ejemplo basado en datos históricos reales
            document.getElementById('age').value = '28';
            document.getElementById('sex').value = 'female';
            document.getElementById('pclass').value = '1';
            document.getElementById('fare').value = '200';
            document.getElementById('embarked').value = 'C';
            document.getElementById('sibsp').value = '0';
            document.getElementById('parch').value = '0';
            document.getElementById('deck').value = 'B';
            
            // Hacer la predicción automáticamente
            predictSurvival();
        }
        
        // Inicializar con un ejemplo al cargar la página
        window.onload = function() {
            loadExample();
        };
    </script>
</body>
</html>
